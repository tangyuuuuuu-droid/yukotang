<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>ç‚«èˆåœ†å®åŠ©æ‰‹</title>
    
    <style>
        body {
            font-family: "Microsoft YaHei", sans-serif;
            background-color: #f4f5f7;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        h1 { color: #333; }
        #loading {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 15px 25px;
            border-radius: 5px;
            display: block;
            max-width: 400px;
            font-size: 14px;
            line-height: 1.6;
        }
    </style>
</head>
<body>

<h1>æ¬¢è¿æ¥åˆ°ç‚«èˆä¸–ç•Œ ğŸ’ƒ</h1>

<div id="loading">æ­£åœ¨åŠ è½½èŠå¤©åŠ©æ‰‹...<br>è¯·ç¨å€™...</div>

<script src="https://lf-cdn.coze.cn/obj/unpkg/flow-platform/chat-app-sdk/1.2.0-beta.20/libs/cn/index.js"></script>

<script>
    function showStatus(message, isError) {
        var loading = document.getElementById('loading');
        loading.innerHTML = message;
        loading.style.background = isError ? 'rgba(255,0,0,0.8)' : 'rgba(0,0,0,0.7)';
        loading.style.display = 'block';
        console.log(message);
    }
    
    showStatus('ğŸ“¡ æ­£åœ¨åŠ è½½ SDK...');
    
    window.addEventListener('load', function() {
        
        showStatus('ğŸ”„ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–...');
        
        if (typeof CozeWebSDK === 'undefined') {
            showStatus('âŒ SDK åŠ è½½å¤±è´¥ï¼<br>è¯·åˆ·æ–°é¡µé¢é‡è¯•', true);
            return;
        }
        
        showStatus('âœ… SDK åŠ è½½æˆåŠŸï¼<br>ğŸ”‘ æ­£åœ¨ç”Ÿæˆç”¨æˆ·ID...');
        
        var myUserId = sessionStorage.getItem('coze_user_id');
        if (!myUserId) {
            myUserId = 'user_' + new Date().getTime() + '_' + Math.random().toString(36).slice(2);
            sessionStorage.setItem('coze_user_id', myUserId);
        }
        
        console.log('ğŸ”‘ ç”¨æˆ·ID:', myUserId);
        showStatus('âœ… ç”¨æˆ·IDç”ŸæˆæˆåŠŸï¼<br>ğŸ¤– æ­£åœ¨è¿æ¥æœºå™¨äºº...');
        
        try {
            var chatBot = new CozeWebSDK.WebChatClient({
                config: {
                    bot_id: '7606037508790992923'
                },
                auth: {
                    type: 'token',
                    token: 'pat_vShCWDu8XIDPZhUI5NVJCwBKa95jZTY7kQsJBwvHUAz3RErR8u2aCff9pN3LIMOh',
                    onRefreshToken: async function() { return ''; }
                },
                userInfo: {
                    id: myUserId,
                    nickname: 'ç‚«èˆç©å®¶',
                    url: 'https://lf-coze-web-cdn.coze.cn/obj/eden-cn/lm-lgvj/ljhwZthlaukjlkulzlp/coze/coze-logo.png'
                },
                ui: {
                    base: {
                        icon: 'https://lf-coze-web-cdn.coze.cn/obj/eden-cn/lm-lgvj/ljhwZthlaukjlkulzlp/coze/chatsdk-logo.png',
                        layout: 'pc',
                        lang: 'zh-CN',
                        zIndex: 9999
                    },
                    header: {
                        isShow: true,
                        isNeedClose: true
                    },
                    asstBtn: {
                        isNeed: true
                    },
                    footer: {
                        isShow: false
                    },
                    conversations: {
                        isNeed: true
                    },
                    chatBot: {
                        title: 'ç‚«èˆåœ†å®åŠ©æ‰‹',
                        width: 600,
                        uploadable: true,
                        isNeedAudio: false,
                        isNeedAddNewConversation: true,
                        isNeedFeedback: false
                    }
                }
            });
            
            console.log('âœ… æœºå™¨äººåˆå§‹åŒ–æˆåŠŸï¼');
            showStatus('ğŸ‰ åŠ è½½æˆåŠŸï¼<br>è¯·ç‚¹å‡»å³ä¸‹è§’çš„èŠå¤©æŒ‰é’®å¼€å§‹å¯¹è¯');
            
            setTimeout(function() {
                document.getElementById('loading').style.display = 'none';
            }, 3000);
            
        } catch (error) {
            console.error('âŒ åˆå§‹åŒ–å¤±è´¥:', error);
            var errorMsg = 'âŒ æœºå™¨äººåˆå§‹åŒ–å¤±è´¥ï¼<br><br>é”™è¯¯ä¿¡æ¯ï¼š' + error.message;
            showStatus(errorMsg, true);
        }
    });
</script>

</body>
</html>
